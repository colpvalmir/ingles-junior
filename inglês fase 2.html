<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tommy — Magic Backpack (Aprenda Inglês)</title>
  <style>
    :root{--bg:#f7f9fc;--card:#fff;--accent:#4f46e5;--accent-2:#06b6d4;--muted:#6b7280}
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#eef2ff);color:#111}
    .app{max-width:980px;margin:28px auto;padding:20px}
    header{display:flex;gap:16px;align-items:center}
    header h1{margin:0;font-size:1.6rem;color:var(--accent)}
    header p{margin:0;color:var(--muted)}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:18px}
    .card{background:var(--card);border-radius:14px;padding:16px;box-shadow:0 6px 20px rgba(15,23,42,0.06)}
    .lesson-title{display:flex;justify-content:space-between;align-items:center}
    .word-row{display:flex;gap:12px;align-items:center;padding:10px;border-radius:10px;border:1px dashed #e6eef8;margin-bottom:10px}
    .word-row .emoji{font-size:32px}
    .word-row .text{flex:1}
    .text .eng{font-weight:700;font-size:1.15rem}
    .text .pt{color:var(--muted);font-size:0.95rem}
    button.speak{background:transparent;border:1px solid #e5e7eb;padding:6px 10px;border-radius:8px;cursor:pointer}
    .controls{display:flex;gap:8px;margin-top:12px}
    .progress{height:10px;background:#eef2ff;border-radius:999px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0%}
    .activity{margin-top:12px}
    .activity h3{margin:0 0 8px 0}
    .match-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .dropzone{min-height:56px;border:2px dashed #e6eef8;border-radius:10px;padding:8px;background:#fbfdff}
    .draggable{display:inline-flex;gap:8px;align-items:center;padding:8px 10px;border-radius:8px;background:#fff;border:1px solid #f1f5f9;cursor:grab}
    .hidden{display:none}
    footer{margin-top:14px;text-align:center;color:var(--muted);font-size:0.95rem}
    .conclusion{margin-top:12px;padding:10px;background:#fff7ed;border-radius:10px;color:#92400e}
    /* responsive */
    @media (max-width:900px){.grid{grid-template-columns:1fr}} 
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>Tommy — Magic Backpack</h1>
        <p>Mini-curso divertido: aprenda 10 palavras em inglês (nível iniciante)</p>
      </div>
      <div style="margin-left:auto;text-align:right">
        <div style="font-weight:700;color:var(--muted)">Progresso</div>
        <div class="progress" aria-hidden>
          <i id="bar" style="width:0%"></i>
        </div>
      </div>
    </header>

    <div class="grid">
      <!-- main lesson column -->
      <div>
        <div class="card">
          <div class="lesson-title">
            <div>
              <strong>Lesson 2 — In the Kitchen</strong>
              <div style="color:var(--muted);font-size:0.9rem">10 palavras novas — repita, jogue e desenhe!</div>
            </div>
            <div style="display:flex;flex-direction:column;align-items:flex-end;gap:8px;">
              <small style="color:var(--muted)">Aluno: 8 anos</small>
              <a href="index.html" class="speak" style="background:var(--muted);color:white;border:none;padding:8px 16px;border-radius:8px;font-size:0.9rem;text-decoration:none;display:inline-block;">
                ⬅️ Lição Anterior: At the Park
              </a>
            </div>
          </div>

          <!-- word list -->
          <div id="words">
            <!-- each word row generated by JS -->
          </div>

          <div class="controls">
            <button id="speakAll" class="speak">🔊 Ouvir todas</button>
            <button id="shuffle" class="speak">🔁 Embaralhar</button>
            <button id="reset" class="speak">♻️ Reiniciar</button>
          </div>

          <div class="activity" id="activityArea" style="display: none;">
            <h3>Atividade 1 — Match (arraste até o desenho)</h3>
            <p style="margin:6px 0;color:var(--muted)">Arraste as palavras para a imagem correspondente.</p>

            <div class="match-grid">
              <div>
                <div class="dropzone" data-accept="spoon">🥄</div>
                <div class="dropzone" data-accept="fork" style="margin-top:8px">🍴</div>
                <div class="dropzone" data-accept="plate" style="margin-top:8px">🍽️</div>
                <div class="dropzone" data-accept="cup" style="margin-top:8px">☕</div>
              </div>
              <div>
                <div class="dropzone" data-accept="knife">🔪</div>
                <div class="dropzone" data-accept="bowl" style="margin-top:8px">🥣</div>
                <div class="dropzone" data-accept="cook" style="margin-top:8px">👨‍🍳</div>
                <div class="dropzone" data-accept="water" style="margin-top:8px">💧</div>
              </div>
            </div>

            <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap" id="draggables">
              <!-- draggable items here -->
            </div>

            <div style="margin-top:12px">
              <button id="checkMatch" class="speak">✅ Checar respostas</button>
              <span id="matchResult" style="margin-left:10px;color:var(--muted)"></span>
            </div>
          </div>

          <div class="activity" id="activity2" style="display: none;">
            <h3>Atividade 2 — Multiple Choice</h3>
            <p style="margin:6px 0;color:var(--muted)">Escolha a tradução correta (português) para a palavra em inglês.</p>
            <div id="mcqArea"></div>
            <div style="margin-top:8px">
              <button id="nextMcq" class="speak">Próxima</button>
              <span id="mcqResult" style="margin-left:10px;color:var(--muted)"></span>
            </div>
          </div>

          <div class="activity" id="activity3" style="display: none;">
            <h3>Atividade 3 — Desenhe & Conte</h3>
            <p style="margin:6px 0;color:var(--muted)">Peça para a criança desenhar uma cozinha e dizer em voz alta as palavras que apareceram.</p>
            <button id="voicePrompt" class="speak">👩‍🏫 Repetir instruções em voz alta</button>
          </div>

          <!-- Botões para revelar atividades -->
          <div style="margin-top:18px;text-align:center;">
            <button id="showActivity1" class="speak" style="background:var(--accent);color:white;border:none;padding:12px 24px;font-size:1.1rem;">
              🎯 Mostrar Atividade 1
            </button>
          </div>

        </div>

        <div class="card" style="margin-top:12px">
          <h3 style="margin:0 0 8px 0">Conclusão</h3>
          <div class="conclusion">
            Aprender com calma, repetir e praticar diariamente ajuda a formar hábitos positivos. Pequenos passos constantes levam a grandes resultados — assim como cuidar de uma semente que cresce e dá fruto.
          </div>
        </div>

      </div>

      <!-- side column -->
      <aside>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
            <strong>Palavras desta lição</strong>
            <button id="toggleWords" class="speak" style="background:var(--accent);color:white;border:none;padding:4px 8px;border-radius:6px;font-size:0.8rem;cursor:pointer;">
              👁️ Ocultar
            </button>
          </div>
          <div id="wordsContent" style="margin-top:8px;color:var(--muted)">Toque na palavra para ouvir e ver exemplos.
          </div>
          <div id="sideList" style="margin-top:10px"></div>
        </div>

        <div class="card" style="margin-top:12px">
          <strong>Ajuda para o professor / família</strong>
          <ul style="margin:8px 0 0 18px;color:var(--muted)">
            <li>Repita as palavras 2–3 vezes por dia.</li>
            <li>Faça mímica e desenhos — crianças lembram melhor assim.</li>
            <li>Use reforço positivo: elogios e pequenos prêmios funcionam bem.</li>
          </ul>
        </div>

      </aside>
    </div>

    <footer>
      Project created for a child learner — designed to be playful, simple and safe. <br>
          </footer>
  </div>

<script>
  // Core words for the lesson
  const WORDS = [
    {key:'spoon',eng:'spoon',pt:'colher',emoji:'🥄'},
    {key:'fork',eng:'fork',pt:'garfo',emoji:'🍴'},
    {key:'plate',eng:'plate',pt:'prato',emoji:'🍽️'},
    {key:'cup',eng:'cup',pt:'copo',emoji:'☕'},
    {key:'knife',eng:'knife',pt:'faca',emoji:'🔪'},
    {key:'bowl',eng:'bowl',pt:'tigela',emoji:'🥣'},
    {key:'cook',eng:'cook',pt:'cozinhar',emoji:'👨‍🍳'},
    {key:'water',eng:'water',pt:'água',emoji:'💧'},
    {key:'bread',eng:'bread',pt:'pão',emoji:'🍞'},
    {key:'milk',eng:'milk',pt:'leite',emoji:'🥛'}
  ];

  // state
  let progress = 0; // 0..10
  const bar = document.getElementById('bar');

  function updateProgress(){
    const pct = Math.round((progress / WORDS.length) * 100);
    bar.style.width = pct + '%';
  }

  // build word rows
  const wordsDiv = document.getElementById('words');
  const sideList = document.getElementById('sideList');

  function speak(text){
    if(!('speechSynthesis' in window)) return alert('Este navegador não suporta síntese de voz.');
    const u = new SpeechSynthesisUtterance(text);
    u.lang = 'en-US';
    u.rate = 0.9;
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(u);
  }

  function renderWords(list){
    wordsDiv.innerHTML='';
    sideList.innerHTML='';
    list.forEach(w=>{
      const row = document.createElement('div');
      row.className='word-row';
      row.innerHTML = `
        <div class='emoji'>${w.emoji}</div>
        <div class='text'>
          <div class='eng'>${w.eng}</div>
          <div class='pt'>${w.pt}</div>
        </div>
        <div>
          <button class='speak' data-word='${w.eng}'>🔊</button>
        </div>
      `;
      wordsDiv.appendChild(row);

      // side list
      const li = document.createElement('div');
      li.style.padding='8px';
      li.style.borderBottom='1px solid #f1f5f9';
      li.innerHTML = `<strong>${w.eng}</strong> — <small style='color:var(--muted)'>${w.pt}</small> <button class='speak' data-word='${w.eng}' style='margin-left:8px'>🔊</button>`;
      sideList.appendChild(li);
    });

    // add listeners
    document.querySelectorAll('.speak[data-word]').forEach(b=>b.addEventListener('click',e=>{
      const wd = e.currentTarget.dataset.word; speak(wd);
      // increment small progress when a word is listened
      progress = Math.min(WORDS.length, progress + 0.05);
      updateProgress();
    }));
  }

  // initial render
  renderWords(WORDS);

  // speak all
  document.getElementById('speakAll').addEventListener('click',()=>{
    WORDS.forEach((w,i)=>setTimeout(()=>speak(w.eng), i*700));
  });

  // shuffle
  document.getElementById('shuffle').addEventListener('click',()=>{
    const s = [...WORDS].sort(()=>Math.random()-0.5);
    renderWords(s);
  });

  // reset
  document.getElementById('reset').addEventListener('click',()=>{
    progress = 0; updateProgress(); renderWords(WORDS);
    populateDraggables(); setupMcq();
    
    // Reset do sistema de atividades
    document.getElementById('activityArea').style.display = 'none';
    document.getElementById('activity2').style.display = 'none';
    document.getElementById('activity3').style.display = 'none';
    
    // Mostrar todas as seções principais
    document.getElementById('words').style.display = 'block';
    document.getElementById('controls').style.display = 'block';
    document.querySelector('.conclusion').parentNode.style.display = 'block';
    
    // Remover botões de atividades 2 e 3 se existirem
    const showActivity2Btn = document.getElementById('showActivity2');
    const showActivity3Btn = document.getElementById('showActivity3');
    if (showActivity2Btn) showActivity2Btn.remove();
    if (showActivity3Btn) showActivity3Btn.remove();
    
    // Remover mensagem de conclusão se existir
    const conclusionMsg = document.querySelector('[style*="background:var(--accent)"][style*="color:white"]');
    if (conclusionMsg) conclusionMsg.remove();
    
    // Remover botões de voltar se existirem
    const backToMainBtn = document.getElementById('backToMain');
    const backToActivity1Btn = document.getElementById('backToActivity1');
    const backToActivity2Btn = document.getElementById('backToActivity2');
    if (backToMainBtn) backToMainBtn.remove();
    if (backToActivity1Btn) backToActivity1Btn.remove();
    if (backToActivity2Btn) backToActivity2Btn.remove();
    
    // Mostrar botão da Atividade 1
    document.getElementById('showActivity1').style.display = 'inline-block';
    
    // Reset do toggle das palavras
    const wordsContent = document.getElementById('wordsContent');
    const sideList = document.getElementById('sideList');
    const toggleWords = document.getElementById('toggleWords');
    
    wordsContent.style.display = 'block';
    sideList.style.display = 'block';
    toggleWords.innerHTML = '👁️ Ocultar';
    toggleWords.style.background = 'var(--accent)';
    wordsVisible = true;
  });

  // DRAG & DROP matching setup
  function populateDraggables(){
    const draggables = document.getElementById('draggables');
    draggables.innerHTML = '';
    const items = [...WORDS].map(w=>({key:w.key, label:w.eng})).sort(()=>Math.random()-0.5);
    items.forEach(it=>{
      const d = document.createElement('div');
      d.className='draggable';
      d.draggable = true;
      d.dataset.key = it.key;
      d.textContent = it.label;
      d.addEventListener('dragstart', e=> e.dataTransfer.setData('text/plain', it.key));
      draggables.appendChild(d);
    });

    // dropzones
    document.querySelectorAll('.dropzone').forEach(z=>{
      z.innerHTML = z.getAttribute('data-accept') ? z.textContent : '';
      z.addEventListener('dragover', e=> e.preventDefault());
      z.addEventListener('drop', e=>{
        e.preventDefault();
        const key = e.dataTransfer.getData('text/plain');
        // put label
        const existing = z.querySelector('.placed');
        if(existing) existing.remove();
        const span = document.createElement('div');
        span.className='placed';
        span.style.marginTop='6px';
        span.style.padding='6px';
        span.style.background='#fff';
        span.style.border='1px solid #e6eef8';
        span.style.borderRadius='6px';
        span.textContent = WORDS.find(w=>w.key===key).eng;
        z.appendChild(span);
      });
    });
  }

  document.getElementById('checkMatch').addEventListener('click',()=>{
    const zones = [...document.querySelectorAll('.dropzone')];
    let correct = 0; let total=0;
    zones.forEach(z=>{
      const placed = z.querySelector('.placed');
      const accept = z.dataset.accept;
      if(accept){ total++; if(placed && placed.textContent.toLowerCase() === WORDS.find(w=>w.key===accept).eng) correct++; }
    });
    document.getElementById('matchResult').textContent = `Acertos: ${correct} de ${total}`;
    // update progress: +1 for each correct
    progress = Math.min(WORDS.length, progress + correct);
    updateProgress();
  });

  // MCQ (multiple choice)
  let mcqIndex = 0;
  function shuffle(arr){ return arr.sort(()=>Math.random()-0.5); }
  function setupMcq(){
    mcqIndex = 0;
    const area = document.getElementById('mcqArea'); area.innerHTML='';
    const order = shuffle([...WORDS]);
    // show first
    renderMcq(order[mcqIndex], order);
  }
  function renderMcq(word, pool){
    const area = document.getElementById('mcqArea');
    area.innerHTML = '';
    
    // Limpar resultado anterior
    document.getElementById('mcqResult').textContent = '';
    
    const q = document.createElement('div');
    q.innerHTML = `
      <div style='display:flex;align-items:center;gap:12px;margin-bottom:8px;'>
        <div style='font-weight:700;font-size:1.2rem'>${word.eng}</div>
        <button class='speak' data-word='${word.eng}' style='background:var(--accent);color:white;border:none;padding:8px;border-radius:50%;cursor:pointer;font-size:1.2rem;width:40px;height:40px;display:flex;align-items:center;justify-content:center;'>
          🔊
        </button>
      </div>
      <div style='color:var(--muted);margin-bottom:8px'>Qual é a tradução?</div>
    `;
    const choices = shuffle([word.pt, ...shuffle(pool.filter(p=>p.key!==word.key).slice(0,3).map(p=>p.pt))]);
    choices.forEach(ch=>{
      const b = document.createElement('button');
      b.className='speak'; b.style.display='block'; b.style.width='100%'; b.style.marginTop='6px';
      b.textContent = ch;
      b.addEventListener('click',()=>{
        const ok = ch === word.pt;
        document.getElementById('mcqResult').textContent = ok ? '✅ Correto!' : '❌ Tente novamente';
        if(ok){ progress = Math.min(WORDS.length, progress + 1); updateProgress(); }
      });
      q.appendChild(b);
    });
    area.appendChild(q);
    
    // Adicionar evento de clique para o botão de som
    const audioBtn = q.querySelector('.speak[data-word]');
    if (audioBtn) {
      audioBtn.addEventListener('click', function() {
        const wordToSpeak = this.dataset.word;
        speak(wordToSpeak);
      });
    }
  }
  document.getElementById('nextMcq').addEventListener('click',()=>{
    mcqIndex++; const order = window._mcqOrder || shuffle([...WORDS]); window._mcqOrder = order;
    if(mcqIndex >= order.length) { document.getElementById('mcqResult').textContent='Fim das perguntas.'; return; }
    renderMcq(order[mcqIndex], order);
  });

  document.getElementById('voicePrompt').addEventListener('click',()=>{
    const text = 'Draw a kitchen with all the utensils. Say the words spoon, fork, plate, cup, knife, bowl, cook, water, bread and milk.';
    speak(text);
  });

  // initial
  populateDraggables(); setupMcq(); updateProgress();

  // Sistema de revelação de atividades
  let currentActivity = 0;
  
  // Toggle para esconder/mostrar palavras
  let wordsVisible = true;
  document.getElementById('toggleWords').addEventListener('click', function() {
    const wordsContent = document.getElementById('wordsContent');
    const sideList = document.getElementById('sideList');
    
    if (wordsVisible) {
      // Ocultar conteúdo
      wordsContent.style.display = 'none';
      sideList.style.display = 'none';
      this.innerHTML = '👁️ Mostrar';
      this.style.background = 'var(--muted)';
      wordsVisible = false;
    } else {
      // Mostrar conteúdo
      wordsContent.style.display = 'block';
      sideList.style.display = 'block';
      this.innerHTML = '👁️ Ocultar';
      this.style.background = 'var(--accent)';
      wordsVisible = true;
    }
  });
  
  // Botão para mostrar Atividade 1
  document.getElementById('showActivity1').addEventListener('click', function() {
    console.log('Botão Atividade 1 clicado!'); // Debug
    
    // Ocultar todas as outras seções
    const words = document.getElementById('words');
    const controls = document.getElementById('controls');
    const activity2 = document.getElementById('activity2');
    const activity3 = document.getElementById('activity3');
    const conclusion = document.querySelector('.conclusion').parentNode;
    
    if (words) words.style.display = 'none';
    if (controls) controls.style.display = 'none';
    if (activity2) activity2.style.display = 'none';
    if (activity3) activity3.style.display = 'none';
    if (conclusion) conclusion.style.display = 'none';
    
    // Mostrar apenas a Atividade 1
    const activityArea = document.getElementById('activityArea');
    if (activityArea) {
      activityArea.style.display = 'block';
      console.log('Atividade 1 exibida!'); // Debug
    }
    
    this.style.display = 'none';
    
    // Adicionar botão Voltar para Atividade 1
    const backToMainBtn = document.createElement('button');
    backToMainBtn.id = 'backToMain';
    backToMainBtn.className = 'speak';
    backToMainBtn.style.cssText = 'background:var(--muted);color:white;border:none;padding:8px 16px;border-radius:8px;font-size:0.9rem;margin-bottom:18px;cursor:pointer;';
    backToMainBtn.innerHTML = '⬅️ Voltar ao Início';
    backToMainBtn.addEventListener('click', function() {
      console.log('Voltando ao início...'); // Debug
      
      // Mostrar todas as seções principais
      if (words) words.style.display = 'block';
      if (controls) controls.style.display = 'block';
      if (conclusion) conclusion.style.display = 'block';
      
      // Ocultar Atividade 1
      if (activityArea) activityArea.style.display = 'none';
      
      // Mostrar botão da Atividade 1 novamente
      document.getElementById('showActivity1').style.display = 'inline-block';
      
      // Remover botões de navegação
      this.remove();
      const showActivity2Btn = document.getElementById('showActivity2');
      if (showActivity2Btn && showActivity2Btn.parentNode) {
        showActivity2Btn.parentNode.remove();
      }
    });
    
    // Inserir botão voltar antes da atividade
    if (activityArea) {
      activityArea.insertBefore(backToMainBtn, activityArea.firstChild);
    }
    
    // Mostrar botão para Atividade 2
    const showActivity2Btn = document.createElement('button');
    showActivity2Btn.id = 'showActivity2';
    showActivity2Btn.className = 'speak';
    showActivity2Btn.style.cssText = 'background:var(--accent);color:white;border:none;padding:12px 24px;font-size:1.1rem;margin-top:18px;';
    showActivity2Btn.innerHTML = '🧩 Mostrar Atividade 2';
    
    showActivity2Btn.addEventListener('click', function() {
      console.log('Mostrando Atividade 2...'); // Debug
      
      // Ocultar Atividade 1
      if (activityArea) activityArea.style.display = 'none';
      this.style.display = 'none';
      
      // Mostrar Atividade 2
      if (activity2) activity2.style.display = 'block';
      
      // Adicionar botão Voltar para Atividade 2
      const backToActivity1Btn = document.createElement('button');
      backToActivity1Btn.id = 'backToActivity1';
      backToActivity1Btn.className = 'speak';
      backToActivity1Btn.style.cssText = 'background:var(--muted);color:white;border:none;padding:8px 16px;border-radius:8px;font-size:0.9rem;margin-bottom:18px;cursor:pointer;';
      backToActivity1Btn.innerHTML = '⬅️ Voltar à Atividade 1';
      backToActivity1Btn.addEventListener('click', function() {
        // Ocultar Atividade 2
        if (activity2) activity2.style.display = 'none';
        
        // Mostrar Atividade 1
        if (activityArea) activityArea.style.display = 'block';
        
        // Remover botões de navegação da Atividade 2
        this.remove();
        const showActivity3Btn = document.getElementById('showActivity3');
        if (showActivity3Btn && showActivity3Btn.parentNode) {
          showActivity3Btn.parentNode.remove();
        }
      });
      
      // Inserir botão voltar antes da Atividade 2
      if (activity2) {
        activity2.insertBefore(backToActivity1Btn, activity2.firstChild);
      }
      
      // Mostrar botão para Atividade 3
      const showActivity3Btn = document.createElement('button');
      showActivity3Btn.id = 'showActivity3';
      showActivity3Btn.className = 'speak';
      showActivity3Btn.style.cssText = 'background:var(--accent);color:white;border:none;padding:12px 24px;font-size:1.1rem;margin-top:18px;';
      showActivity3Btn.innerHTML = '🎨 Mostrar Atividade 3';
      
      showActivity3Btn.addEventListener('click', function() {
        console.log('Mostrando Atividade 3...'); // Debug
        
        // Ocultar Atividade 2
        if (activity2) activity2.style.display = 'none';
        this.style.display = 'none';
        
        // Mostrar Atividade 3
        if (activity3) activity3.style.display = 'block';
        
        // Adicionar botão Voltar para Atividade 3
        const backToActivity2Btn = document.createElement('button');
        backToActivity2Btn.id = 'backToActivity2';
        backToActivity2Btn.className = 'speak';
        backToActivity2Btn.style.cssText = 'background:var(--muted);color:white;border:none;padding:8px 16px;border-radius:8px;font-size:0.9rem;margin-bottom:18px;cursor:pointer;';
        backToActivity2Btn.innerHTML = '⬅️ Voltar à Atividade 2';
        backToActivity2Btn.addEventListener('click', function() {
          // Ocultar Atividade 3
          if (activity3) activity3.style.display = 'none';
          
          // Mostrar Atividade 2
          if (activity2) activity2.style.display = 'block';
          
          // Remover botões de navegação da Atividade 3
          this.remove();
          const conclusionMsg = document.querySelector('[style*="background:var(--accent)"][style*="color:white"]');
          if (conclusionMsg && conclusionMsg.parentNode) {
            conclusionMsg.parentNode.remove();
          }
        });
        
        // Inserir botão voltar antes da Atividade 3
        if (activity3) {
          activity3.insertBefore(backToActivity2Btn, activity3.firstChild);
        }
        
        // Mostrar mensagem de conclusão
        const conclusionMsg = document.createElement('div');
        conclusionMsg.style.cssText = 'text-align:center;margin-top:18px;padding:16px;background:var(--accent);color:white;border-radius:10px;font-weight:bold;';
        conclusionMsg.innerHTML = '🎉 Parabéns! Você completou todas as atividades!';
        this.parentNode.appendChild(conclusionMsg);
      });
      
      this.parentNode.appendChild(showActivity3Btn);
    });
    
    this.parentNode.appendChild(showActivity2Btn);
  });

  // small accessibility: keyboard speak on focus
  document.addEventListener('keydown', e=>{
    if(e.key === ' '){ const el = document.activeElement; if(el && el.classList.contains('draggable')) speak(el.textContent); }
  });

  // lightweight save progress to localStorage
  setInterval(()=> localStorage.setItem('tommy_progress', JSON.stringify({progress})), 2000);

</script>
</body>
</html>


